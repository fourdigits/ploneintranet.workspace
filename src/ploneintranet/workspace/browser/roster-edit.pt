<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="plone">

<head>
</head>

<body>
<metal:main fill-slot="main"
     tal:define="context_state context/@@plone_context_state">

    <h1 class="documentFirstHeading"
        i18n:translate="heading_edit_roster">
        Edit roster for
        <q tal:content="context/Title" i18n:name="folder">title</q>
    </h1>

    <div tal:replace="structure provider:plone.abovecontentbody" tal:condition="not:ajax_load" />

    <div id="content-core">
        <form method="post"
              tal:attributes="action string:${context/absolute_url}/@@edit-roster">

            <input type="hidden" name="form.submitted:boolean" value="True" />

            <div class="field">
                <input type="text"
                       id="edit-roster-user-search"
                       size="30"
                       name="search_term"
                       title="Search for a user"
                       placeholder="Search for a user"
                       i18n:attributes="title; placeholder"
                       class="searchField"
                       value=""
                       />
                <input type="submit"
                       id="edit-roster-search-button"
                       name="form.button.Search"
                       value="Search"
                       class="searchButton allowMultiSubmit"
                       i18n:attributes="value label_search"
                       />
            </div>

        <div id="edit-roster-container">
        <table metal:define-macro="edit-roster" id="edit-roster"
               class="listing"
               summary="Current sharing permissions"
               tal:define="users view/users;"
               i18n:attributes="summary rostered-users;">

              <thead metal:define-macro="edit-roster-head" id="edit-roster-head">
                  <tr>
                      <th i18n:translate="label_name">Name</th>
                      <th class="nosort">Member</th>
                  </tr>
              </thead>

            <tbody metal:define-macro="edit-roster-settings" id="edit-roster-settings">
                <tal:entries repeat="user users">
                    <tr tal:define="oddrow repeat/user/odd;
                                    disabled user/disabled | python:False;
                                    member user/member | python:False;"
                        tal:attributes="class python:oddrow and 'odd' or 'even'">
                        <td>
                              <span tal:replace="user/title" />
                            <input
                                type="hidden"
                                name="entries.id:records"
                                tal:attributes="value user/id"
                                />
                        </td>
                        <td class="listingCheckbox">
                          <input class="noborder"
                                 type="checkbox"
                                 value="1"
                                 name="entries.update:records"
                                 tal:attributes="disabled python: disabled or None;
                                                 checked python: member and 'checked' or None"
                                 />
                        </td>
                    </tr>
                </tal:entries>
            </tbody>
        </table>
        </div>

            <input id="edit-roster-save-button" class="context allowMultiSubmit" type="submit" name="form.button.Save" value="Save" i18n:attributes="value label_save" />
            <input class="standalone" type="submit" name="form.button.Cancel" value="Cancel" i18n:attributes="value label_cancel"/>

            <input tal:replace="structure context/@@authenticator/authenticator" />

        </form>
    </div>
</metal:main>
</body>
</html>
